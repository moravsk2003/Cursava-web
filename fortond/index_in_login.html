<!doctype html>
<html lang="en" data-bs-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.145.0">
    <title>Headers Â· Bootstrap v5.3</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/headers/">

    <script src="../assets/js/color-modes.js"></script>

    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="apple-touch-icon" href="../assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="../assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="../assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="../assets/img/favicons/manifest.json">
<link rel="mask-icon" href="../assets/img/favicons/safari-pinned-tab.svg" color="#712cf9">
<link rel="icon" href="../assets/img/favicons/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<meta name="theme-color" content="#712cf9">


    <style>
      .card {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeIn 0.5s ease-out forwards;
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .card-container {
    opacity: 0;
    animation: fadeInContainer 0.7s ease-out forwards;
  }

  @keyframes fadeInContainer {
    to {
      opacity: 1;
    }
  }
      #filter-nav .nav-link {
      color: #555;
      border-radius: 25px;
      transition: background-color 0.3s, color 0.3s;
      margin: 0 4px;
    }
    body.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }
    #filter-nav .nav-link:hover {
      background-color: #f0f0f0;
    }

    #filter-nav .nav-link.active {
      background-color: #0d6efd;
      color: white;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(13, 110, 253, 0.3);
      transition: all 0.3s ease-in-out;
    }
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        width: 100%;
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }

      .btn-bd-primary {
        --bd-violet-bg: #712cf9;
        --bd-violet-rgb: 112.520718, 44.062154, 249.437846;

        --bs-btn-font-weight: 600;
        --bs-btn-color: var(--bs-white);
        --bs-btn-bg: var(--bd-violet-bg);
        --bs-btn-border-color: var(--bd-violet-bg);
        --bs-btn-hover-color: var(--bs-white);
        --bs-btn-hover-bg: #6528e0;
        --bs-btn-hover-border-color: #6528e0;
        --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
        --bs-btn-active-color: var(--bs-btn-hover-color);
        --bs-btn-active-bg: #5a23c8;
        --bs-btn-active-border-color: #5a23c8;
      }

      .bd-mode-toggle {
        z-index: 1500;
      }

      .bd-mode-toggle .bi {
        width: 1em;
        height: 1em;
      }

      .bd-mode-toggle .dropdown-menu .active .bi {
        display: block !important;
      }
    </style>
    <link href="headers.css" rel="stylesheet">
  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>


    <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
      <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active" aria-hidden="true"><use href="#circle-half"></use></svg>
  <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
</button>
<ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50" aria-hidden="true"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none" aria-hidden="true"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50" aria-hidden="true"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none" aria-hidden="true"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50" aria-hidden="true"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none" aria-hidden="true"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

    </div>

    
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="bootstrap" viewBox="0 0 118 94">
    <title>Bootstrap</title>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z"></path>
  </symbol>
  <symbol id="home" viewBox="0 0 16 16">
    <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
  </symbol>
  <symbol id="speedometer2" viewBox="0 0 16 16">
    <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
    <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"/>
  </symbol>
  <symbol id="table" viewBox="0 0 16 16">
    <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
  </symbol>
  <symbol id="people-circle" viewBox="0 0 16 16">
    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
  </symbol>
  <symbol id="grid" viewBox="0 0 16 16">
    <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
  </symbol>
</svg>



  <header>
    <div class="px-3 py-2 text-bg-dark border-bottom">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
          <a href="/" class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
            <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
          </a>
          <form class="col-12 col-lg-auto mb-2 mb-lg-0 me-lg-3" role="search">
            <input type="search" class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
          </form>
          <div class="dropdown text-end">
            <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="photo/pngwing.com .png" alt="mdo" width="32" height="32" class="rounded-circle">
            </a>
            <ul class="dropdown-menu text-small ">
              <li><a class="dropdown-item" href="#" onclick="navigateWithFade('profil.html')">Profile</a></li>
              <li><a class="dropdown-item" href="#">My comit</a></li>
              <li><a class="dropdown-item" href="#">History</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#" onclick="navigateWithFade('index.html')">Sign out</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="nav-scroller bg-body shadow-sm">
      <nav class="nav nav-pills justify-content-center" id="filter-nav">
        <a class="nav-link active" data-filter="all" href="#">All</a>
        <a class="nav-link" data-filter="anime" href="#">Anime</a>
        <a class="nav-link" data-filter="book" href="#">Book</a>
        <a class="nav-link" data-filter="manhva" href="#">Manhva</a>
        <a class="nav-link" data-filter="manhvua" href="#">Manhvua</a>
        <a class="nav-link" data-filter="manga" href="#">Manga</a>
        <a class="nav-link" data-filter="film" href="#">Film</a>
        <a class="nav-link" data-filter="web_nowela" href="#">Web_nowela</a>
        <button class="btn btn-primary ms-3" id="add-card-button" style="display: none;" onclick="openAddModal()">Add New Card</button> </nav>
    </div>
  </header>
  
  <div class="modal fade" id="addCardModal" tabindex="-1" aria-labelledby="addCardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addCardModalLabel">ÐÐ¾Ð´Ð°ÑÐ¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð¿ÑÐ¾Ð´ÑÐºÑ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form id="addCardForm">
          <div class="modal-body">
            <div class="mb-3">
              <label for="addCardOriginalTitle" class="form-label">ÐÐ°Ð·Ð²Ð°</label>
              <input type="text" class="form-control" id="addCardOriginalTitle" required>
            </div>
            <div class="mb-3">
              <label for="addCardDescription" class="form-label">ÐÐ¿Ð¸Ñ</label>
              <textarea class="form-control" id="addCardDescription" rows="3" required></textarea>
            </div>
            <div class="mb-3">
              <label for="addCardType" class="form-label">Ð¢Ð¸Ð¿</label>
              <select class="form-select" id="addCardType" required>
                <option value="">ÐÐ¸Ð±ÐµÑÑÑÑ ÑÐ¸Ð¿...</option>
                <option value="ANIME">Anime</option>
                <option value="BOOK">Book</option>
                <option value="MOVIE">Movie</option>
                <option value="GAME">Game</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ð¡ÐºÐ°ÑÑÐ²Ð°ÑÐ¸</button>
            <button type="submit" class="btn btn-primary">ÐÐ±ÐµÑÐµÐ³ÑÐ¸</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <div class="modal fade" id="editCardModal" tabindex="-1" aria-labelledby="editCardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="editCardForm">
          <div class="modal-header">
            <h5 class="modal-title" id="editCardModalLabel">Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑ</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="editCardId"> <div class="mb-3">
            <label for="editCardOriginalTitle" class="form-label">ÐÐ°Ð·Ð²Ð°</label>
            <input type="text" class="form-control" id="editCardOriginalTitle" required>
          </div>
            <div class="mb-3">
              <label for="editCardDescription" class="form-label">ÐÐ¿Ð¸Ñ</label>
              <textarea class="form-control" id="editCardDescription" required></textarea>
            </div>
            <div class="mb-3">
              <label for="editCardType" class="form-label">Ð¢Ð¸Ð¿</label>
              <select class="form-select" id="editCardType" required>
                <option value="">ÐÐ¸Ð±ÐµÑÑÑÑ ÑÐ¸Ð¿...</option>
                <option value="ANIME">Anime</option>
                <option value="BOOK">Book</option>
                <option value="MOVIE">Movie</option>
                <option value="GAME">Game</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ð¡ÐºÐ°ÑÑÐ²Ð°ÑÐ¸</button>
            <button type="submit" class="btn btn-primary">ÐÐ±ÐµÑÐµÐ³ÑÐ¸ Ð·Ð¼ÑÐ½Ð¸</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  
  
    <div class="album py-5 bg-body-tertiary">
      <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3" id="cardContainer">
          <p class="text-center">ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ²...</p> </div>
      </div>
    </div>
  </div>
  
  <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
    <div class="col-md-4 d-flex align-items-center">
      <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1" aria-label="Bootstrap">
        <svg class="bi" width="30" height="24" aria-hidden="true"><use xlink:href="#bootstrap"/></svg>
      </a>
      <span class="mb-3 mb-md-0 text-body-secondary">&copy; 2025 Company, Inc</span>
    </div>
    <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
      <li class="ms-3"><a class="text-body-secondary" href="#" aria-label="Instagram"><svg class="bi" width="24" height="24" aria-hidden="true"><use xlink:href="#instagram"/></svg></a></li>
      <li class="ms-3"><a class="text-body-secondary" href="#" aria-label="Facebook"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"/></svg> </a></li>
    </ul>
  </footer>
  
  <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
  
  <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="commentModalLabel">ÐÐ¾Ð¼ÐµÐ½ÑÐ°Ñ Ð´Ð¾ Ð¿ÑÐ¾Ð´ÑÐºÑÑ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ÐÐ°ÐºÑÐ¸ÑÐ¸"></button>
        </div>
        <div class="modal-body">
          <textarea class="form-control" id="commentInput" rows="4" placeholder="ÐÐ²ÐµÐ´ÑÑÑ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ..."></textarea>
          <div id="commentsList" style="margin-top: 20px;">
            <!-- Ð¢ÑÑ Ð±ÑÐ´ÑÑÑ Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð¶Ð°ÑÐ¸ÑÑ ÑÑÐ°ÑÑ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÐÐ°ÐºÑÐ¸ÑÐ¸</button>
          <button type="button" class="btn btn-primary" id="saveCommentBtn">ÐÐ±ÐµÑÐµÐ³ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ</button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="..." crossorigin="anonymous"></script>

<script>
  let currentProductId = null;
  const API_BASE_URL = 'http://localhost:8080';

  // --- Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð½Ð°Ð²ÑÐ³Ð°ÑÑÑ ÑÐ° Ð°Ð½ÑÐ¼Ð°ÑÑÑ (Ð·Ð°Ð»Ð¸ÑÐ°ÑÐ¼Ð¾ ÑÑ Ð±ÐµÐ· Ð·Ð¼ÑÐ½) ---
  function navigateWithFade(target) {
    document.body.classList.add('fade-out');
    setTimeout(() => {
      window.location.href = target;
    }, 500);
  }

  function fadeOutPage() {
    const block = document.getElementById('fade-block');
    if (block) {
        block.classList.add('fade-out');
        setTimeout(() => {
            block.style.display = 'none';
        }, 500);
    }
  }

  // --- Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð°ÑÑÐµÐ½ÑÐ¸ÑÑÐºÐ°ÑÑÑ ÑÐ° Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ UI (Ð·Ð°Ð»Ð¸ÑÐ°ÑÐ¼Ð¾ Ð±ÐµÐ· Ð·Ð¼ÑÐ½) ---
  function updateAuthUI() {
      const token = localStorage.getItem('authToken');
      const authButtons = document.getElementById('auth-buttons');
      const userDropdown = document.getElementById('user-dropdown');
      const addCardButton = document.getElementById('add-card-button');

      // Ð¯ÐºÑÐ¾ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ user-dropdown Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾, Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾, Ð¹Ð¾Ð³Ð¾ ID ÑÐ½ÑÐ¸Ð¹
      // ÐÐµÑÐµÐ²ÑÑÑÐµ ID Ñ Ð²Ð°ÑÐ¾Ð¼Ñ HTML Ð´Ð»Ñ <div class="dropdown text-end">
      const userDropdownContainer = document.querySelector('.dropdown.text-end'); // Ð¡Ð¿ÑÐ¾Ð±ÑÑÐ¼Ð¾ Ð·Ð½Ð°Ð¹ÑÐ¸ Ð·Ð° ÐºÐ»Ð°ÑÐ¾Ð¼

      if (token) {
          // ÐÐ¾ÑÐ¸ÑÑÑÐ²Ð°Ñ Ð°ÑÑÐµÐ½ÑÐ¸ÑÑÐºÐ¾Ð²Ð°Ð½Ð¸Ð¹
          if (authButtons) authButtons.style.display = 'none';
          // if (userDropdown) userDropdown.style.display = 'block'; // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÐ¹ÑÐµ ÑÐµ, ÑÐºÑÐ¾ ID Ð¿ÑÐ°Ð²Ð¸Ð»ÑÐ½Ð¸Ð¹
           if (userDropdownContainer) userDropdownContainer.style.display = 'block'; // ÐÐ»ÑÑÐµÑÐ½Ð°ÑÐ¸Ð²Ð° Ð·Ð° ÐºÐ»Ð°ÑÐ¾Ð¼
          if (addCardButton) addCardButton.style.display = 'inline-block'; // ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ ÐºÐ½Ð¾Ð¿ÐºÑ "Add New Card"
      } else {
          // ÐÐ¾ÑÐ¸ÑÑÑÐ²Ð°Ñ Ð½Ðµ Ð°ÑÑÐµÐ½ÑÐ¸ÑÑÐºÐ¾Ð²Ð°Ð½Ð¸Ð¹
          if (authButtons) authButtons.style.display = 'block'; // ÐÐ¾ÐºÐ°Ð·Ð°ÑÐ¸ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð»Ð¾Ð³ÑÐ½Ñ/ÑÐµÑÑÑÑÐ°ÑÑÑ
          // if (userDropdown) userDropdown.style.display = 'none'; // ÐÑÐ¸ÑÐ¾Ð²Ð°ÑÐ¸ Ð´ÑÐ¾Ð¿Ð´Ð°ÑÐ½ ÐºÐ¾ÑÐ¸ÑÑÑÐ²Ð°ÑÐ°
           if (userDropdownContainer) userDropdownContainer.style.display = 'none'; // ÐÐ»ÑÑÐµÑÐ½Ð°ÑÐ¸Ð²Ð° Ð·Ð° ÐºÐ»Ð°ÑÐ¾Ð¼
           if (addCardButton) addCardButton.style.display = 'none'; // ÐÑÐ¸ÑÐ¾Ð²Ð°ÑÐ¸ ÐºÐ½Ð¾Ð¿ÐºÑ "Add New Card"
      }
  }


  const signOutLink = document.querySelector('.dropdown-item[onclick*="index.html"]'); // ÐÐ½Ð°ÑÐ¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾ onclick
  if (signOutLink) {
      signOutLink.addEventListener('click', function(e) {
          e.preventDefault();
          localStorage.removeItem('authToken'); // ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ ÑÐ¾ÐºÐµÐ½
          updateAuthUI(); // ÐÐ½Ð¾Ð²Ð¸ÑÐ¸ ÑÐµÐ´ÐµÑ
          navigateWithFade('index.html'); // ÐÐµÑÐµÐ½Ð°Ð¿ÑÐ°Ð²Ð¸ÑÐ¸ Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ð½Ñ Ð°Ð±Ð¾ ÑÑÐ¾ÑÑÐ½ÐºÑ Ð»Ð¾Ð³ÑÐ½Ñ
      });
  }

  // --- Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÑÐ° Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ² (Ð·Ð°Ð»Ð¸ÑÐ°ÑÐ¼Ð¾ Ð±ÐµÐ· Ð·Ð¼ÑÐ½) ---
  async function fetchAndRenderProducts(filter) {
      const container = document.getElementById('cardContainer');
      if (container) {
           container.innerHTML = '<p class="text-center">ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ²...</p>';
      }

      let url = 'http://localhost:8080/products';

      if (filter && filter !== 'all') {
          url = `http://localhost:8080/products/by-type?type=${filter.toUpperCase()}`;
      }

      try {
          const response = await fetch(url, {
              method: 'GET',
              headers: { 'Accept': 'application/json' }
          });

          if (!response.ok) {
              const errorText = await response.text();
              throw new Error(`ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ²: ${response.status} ${errorText}`);
          }

          const products = await response.json();
          renderCards(products);

      } catch (error) {
          console.error('Ð¡ÑÐ°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ° Ð¿ÑÐ¸ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ²:', error);
          if (container) {
              container.innerHTML = `<p class="text-danger text-center">ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑÐ¸: ${error.message}</p>`;
          }
          // Ð¡Ð¿ÑÐ¾Ð±ÑÐ²Ð°ÑÐ¸ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ð· localStorage Ð¿ÑÐ¸ Ð¿Ð¾Ð¼Ð¸Ð»ÑÑ
          console.log("Ð¡Ð¿ÑÐ¾Ð±Ð° Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ ÐºÐ°ÑÑÐºÐ¸ Ð· localStorage...");
          renderCardsFromLocalStorage();
      }
  }

  function renderCards(products, saveToLocalStorage = true) {
      const container = document.getElementById('cardContainer');
      if (!container) return;

      container.innerHTML = '';

      if (!products || products.length === 0) {
          container.innerHTML = '<p class="text-center">ÐÑÐ¾Ð´ÑÐºÑÐ¸ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾.</p>';
          return;
      }

      // Ð¡Ð¸Ð½ÑÑÐ¾Ð½ÑÐ·Ð°ÑÑÑ Ð· localStorage Ð¢ÐÐÐ¬ÐÐ Ð¯ÐÐ©Ð saveToLocalStorage = true
      if (saveToLocalStorage) {
           console.log("ÐÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ localStorage ÐºÐ°ÑÑÐºÐ°Ð¼Ð¸ Ð· Ð±ÐµÐºÐµÐ½Ð´Ñ...");
          const simplifiedCards = products.map(p => ({
              id: p.id, // ÐÐ°Ð¶Ð»Ð¸Ð²Ð¾ Ð·Ð±ÐµÑÐµÐ³ÑÐ¸ ID Ð´Ð»Ñ Ð·Ð²'ÑÐ·ÐºÑ Ð· ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ¼Ð¸
              title: p.originalTitle || 'ÐÐµÐ· Ð½Ð°Ð·Ð²Ð¸',
              text: p.description || 'ÐÐµÐ· Ð¾Ð¿Ð¸ÑÑ',
              type: p.type || 'N/A'
          }));
          localStorage.setItem('cards', JSON.stringify(simplifiedCards));
      } else {
          console.log("ÐÑÐ¾Ð¿ÑÑÐº Ð·Ð±ÐµÑÐµÐ¶ÐµÐ½Ð½Ñ ÐºÐ°ÑÑÐ¾Ðº Ð² localStorage (Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð¾ Ð·Ð²ÑÐ´ÑÐ¸).");
      }


      products.forEach(product => {
          const title = product.originalTitle || 'ÐÐµÐ· Ð½Ð°Ð·Ð²Ð¸';
          const description = product.description || 'ÐÐµÐ· Ð¾Ð¿Ð¸ÑÑ';
          const type = product.type || 'N/A';
          const productId = product.id; // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÑÐ¼Ð¾ ID Ð· Ð¿ÑÐ¾Ð´ÑÐºÑÑ

          const cardHtml = `
          <div class="col">
              <div class="card shadow-sm">
              <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: ${title}" preserveAspectRatio="xMidYMid slice" focusable="false"><title>${title}</title><rect width="100%" height="100%" fill="#55595c"/><text x="50%" y="50%" fill="#eceeef" dy=".3em">${title}</text></svg>
              <div class="card-body">
                  <p class="card-text">${description}</p>
                  <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                      <button type="button" class="btn btn-sm btn-outline-secondary view-btn" data-product-id="${productId}">View</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary edit-btn" data-product-id="${productId}">Edit</button>
                      <button type="button" class="btn btn-sm btn-outline-danger delete-btn" data-product-id="${productId}">Delete</button>
                  </div>
                  <small class="text-body-secondary">Ð¢Ð¸Ð¿: ${type}</small>
                  </div>
              </div>
              </div>
          </div>
          `;
          container.innerHTML += cardHtml;
      });

      setupCardButtonListeners();
  }

  function renderCardsFromLocalStorage() {
      console.log("ÐÑÐ´Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÐºÐ°ÑÑÐ¾Ðº Ð· localStorage.");
      const savedCardsJson = localStorage.getItem('cards');
      if (!savedCardsJson) {
          console.log("localStorage Ð¿Ð¾ÑÐ¾Ð¶Ð½ÑÐ¹, Ð½ÐµÐ¼Ð°Ñ ÑÐ¾Ð³Ð¾ Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð¶Ð°ÑÐ¸.");
           const container = document.getElementById('cardContainer');
           if(container) container.innerHTML = '<p class="text-center">ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑÐ¸. ÐÐµÑÐµÐ²ÑÑÑÐµ Ð·\'ÑÐ´Ð½Ð°Ð½Ð½Ñ.</p>';
          return;
      }
      try {
           const savedCards = JSON.parse(savedCardsJson) || [];
          // ÐÐµÑÐµÑÐ²Ð¾ÑÑÑÐ¼Ð¾ Ð·Ð±ÐµÑÐµÐ¶ÐµÐ½Ñ Ð´Ð°Ð½Ñ Ð½Ð°Ð·Ð°Ð´ Ñ ÑÐ¾ÑÐ¼Ð°Ñ, ÑÑÐ¾Ð¶Ð¸Ð¹ Ð½Ð° Ð²ÑÐ´Ð¿Ð¾Ð²ÑÐ´Ñ API
          const products = savedCards.map(card => ({
               id: card.id, // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÑÐ¼Ð¾ Ð·Ð±ÐµÑÐµÐ¶ÐµÐ½Ð¸Ð¹ ID
               originalTitle: card.title,
               description: card.text,
               type: card.type
           }));
          renderCards(products, false); // false - Ð½Ðµ Ð·Ð±ÐµÑÑÐ³Ð°ÑÐ¸ Ð·Ð½Ð¾Ð²Ñ Ð² localStorage
      } catch (error) {
          console.error("ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ð°ÑÑÐ¸Ð½Ð³Ñ ÐºÐ°ÑÑÐ¾Ðº Ð· localStorage:", error);
           const container = document.getElementById('cardContainer');
           if(container) container.innerHTML = '<p class="text-center text-danger">ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° ÑÐ¸ÑÐ°Ð½Ð½Ñ Ð·Ð±ÐµÑÐµÐ¶ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð¸Ñ.</p>';
      }
  }

// Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ² Ð· Ð±ÐµÐºÐµÐ½Ð´Ñ
async function fetchComments(productId) {
        const commentsListDiv = document.getElementById('commentsList');
        commentsListDiv.innerHTML = '<p class="text-muted">ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ²...</p>';
        try {
            const response = await fetch(`${API_BASE_URL}/comments/product/get/${productId}`);
            if (!response.ok) {
                throw new Error(`ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ²: ${response.status}`);
            }
            const comments = await response.json();
            displayComments(comments); // ÐÐµÑÐµÐ´Ð°ÑÐ¼Ð¾ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð´Ð»Ñ Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ
        } catch (error) {
            console.error('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ:', error);
            commentsListDiv.innerHTML = '<p class="text-danger">ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ.</p>';
        }
    }
      // Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÑÐ¿Ð¸ÑÐºÑ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ²
      function displayComments(comments) {
        const commentsListDiv = document.getElementById('commentsList');
        commentsListDiv.innerHTML = ''; // ÐÑÐ¸ÑÑÐ¸ÑÐ¸

        if (!comments || comments.length === 0) {
            commentsListDiv.innerHTML = '<p class="text-muted">ÐÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ² ÑÐµ Ð½ÐµÐ¼Ð°Ñ.</p>';
        } else {
            comments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.classList.add('mb-2', 'p-2', 'border', 'rounded'); // Ð¡ÑÐ¸Ð»ÑÐ·Ð°ÑÑÑ

                // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ ÑÐµÐºÑÑ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ
                const textElement = document.createElement('p');
                textElement.textContent = comment.text;
                textElement.classList.add('mb-1');
                commentElement.appendChild(textElement);

                // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ ÑÐ½ÑÐ¾ÑÐ¼Ð°ÑÑÑ Ð¿ÑÐ¾ Ð°Ð²ÑÐ¾ÑÐ° ÑÐ° Ð´Ð°ÑÑ (ÑÐºÑÐ¾ Ñ)
                const metaElement = document.createElement('small');
                metaElement.classList.add('text-muted');
                let metaInfo = '';
                // ÐÑÐ¸ÐºÐ»Ð°Ð´: Ð¯ÐºÑÐ¾ Ð²Ð°Ñ Comment Ð¼Ð°Ñ Ð¿Ð¾Ð»Ðµ author Ð· Ð¿Ð¾Ð»ÐµÐ¼ username
                // if (comment.author && comment.author.username) {
                //     metaInfo += `ÐÐ²ÑÐ¾Ñ: ${comment.author.username}`;
                // } else if (comment.authorId) { // Ð¯ÐºÑÐ¾ Ñ ÑÑÐ»ÑÐºÐ¸ authorId
                //      metaInfo += `ÐÐ²ÑÐ¾Ñ ID: ${comment.authorId}`;
                // }
                // ÐÑÐ¸ÐºÐ»Ð°Ð´: Ð¯ÐºÑÐ¾ Ð²Ð°Ñ Comment Ð¼Ð°Ñ Ð¿Ð¾Ð»Ðµ createdAt
                // if (comment.createdAt) {
                //     metaInfo += ` | ÐÐ°ÑÐ°: ${new Date(comment.createdAt).toLocaleString()}`;
                // }
                metaElement.textContent = metaInfo || 'ÐÐ½ÑÐ¾ÑÐ¼Ð°ÑÑÑ Ð¿ÑÐ¾ Ð°Ð²ÑÐ¾ÑÐ°/Ð´Ð°ÑÑ Ð²ÑÐ´ÑÑÑÐ½Ñ'; // ÐÐ°Ð³Ð»ÑÑÐºÐ°
                commentElement.appendChild(metaElement);

                // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ ÐºÐ½Ð¾Ð¿ÐºÑ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ (ÑÐºÑÐ¾ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾ Ñ ÑÐºÑÐ¾ ÑÐµ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ Ð¿Ð¾ÑÐ¾ÑÐ½Ð¾Ð³Ð¾ ÐºÐ¾ÑÐ¸ÑÑÑÐ²Ð°ÑÐ°)
                // ÐÑÐ¸Ð¼ÑÑÐºÐ°: ÐÐ¾ÑÑÑÐ±Ð½Ð¾ Ð¿Ð¾ÑÑÐ²Ð½ÑÐ²Ð°ÑÐ¸ ID Ð°Ð²ÑÐ¾ÑÐ° ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð· ID Ð¿Ð¾ÑÐ¾ÑÐ½Ð¾Ð³Ð¾ ÐºÐ¾ÑÐ¸ÑÑÑÐ²Ð°ÑÐ°
                //const currentUserId = getCurrentUserId();
                // ÐÑÐ¸Ð¿ÑÑÑÐ¸Ð¼Ð¾, Ð²Ð°Ñ Comment Ð¼Ð°Ñ Ð¿Ð¾Ð»Ðµ authorId
                // if (comment.authorId && comment.authorId === currentUserId) {
                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸';
                    deleteButton.classList.add('btn', 'btn-sm', 'btn-outline-danger', 'ms-2', 'float-end');
                    deleteButton.setAttribute('data-comment-id', comment.id); // ÐÐ±ÐµÑÑÐ³Ð°ÑÐ¼Ð¾ ID ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ
                    deleteButton.onclick = () => deleteCommentFrontend(comment.id); // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ Ð¾Ð±ÑÐ¾Ð±Ð½Ð¸Ðº
                    commentElement.appendChild(deleteButton);
                // }

                commentsListDiv.appendChild(commentElement);
            });
        }
    }
 // Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð½Ð° Ð±ÐµÐºÐµÐ½Ð´
 async function addComment(productId, commentText, ) {
        const commentRequest = {
            text: commentText,
            //authorId: authorId // !!! ÐÐÐÐÐÐÐÐ§ÐÐ Ð Ð ÐÐÐÐ¬ÐÐÐÐ£ ÐÐÐÐÐ¢ÐÐ£ !!!
        };
        const token = localStorage.getItem('authToken'); // ÐÐ¾ÑÑÑÐ±ÐµÐ½ ÑÐ¾ÐºÐµÐ½ Ð´Ð»Ñ Ð°Ð²ÑÐ¾ÑÐ¸Ð·Ð°ÑÑÑ Ð·Ð°Ð¿Ð¸ÑÑ

        try {
            const response = await fetch(`${API_BASE_URL}/comments/product/${productId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}` // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ ÑÐ¾ÐºÐµÐ½, ÑÐºÑÐ¾ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾
                },
                body: JSON.stringify(commentRequest)
            });

            if (!response.ok) {
                // Ð¡Ð¿ÑÐ¾Ð±ÑÑÐ¼Ð¾ Ð¿ÑÐ¾ÑÐ¸ÑÐ°ÑÐ¸ ÑÑÐ»Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸
                const errorBody = await response.text();
                let errorMessage = `ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ: ${response.status}`;
                 try {
                     const errorJson = JSON.parse(errorBody);
                     if (errorJson.message) errorMessage += ` - ${errorJson.message}`;
                 } catch (e) { /* ÑÐ³Ð½Ð¾ÑÑÑÐ¼Ð¾, ÑÐºÑÐ¾ Ð½Ðµ JSON */ }
                throw new Error(errorMessage + `\n${errorBody}`);
            }

            // Ð¯ÐºÑÐ¾ ÑÑÐ¿ÑÑÐ½Ð¾, Ð¾Ð½Ð¾Ð²Ð»ÑÑÐ¼Ð¾ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ²
            await fetchComments(productId); // ÐÐµÑÐµÐ·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÑÑÐ¼Ð¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ
            return true; // Ð£ÑÐ¿ÑÑ

        } catch (error) {
            console.error('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð´Ð¾Ð´Ð°ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ:', error);
            alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð´Ð¾Ð´Ð°ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ: ' + error.message);
            return false; // ÐÐ¾Ð¼Ð¸Ð»ÐºÐ°
        }
    }
    async function deleteCommentFrontend(commentId) {
         if (!confirm(`ÐÐ¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ, ÑÐ¾ ÑÐ¾ÑÐµÑÐµ Ð²Ð¸Ð´Ð°Ð»Ð¸ÑÐ¸ ÑÐµÐ¹ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ (ID: ${commentId})?`)) {
             return;
         }
         const token = localStorage.getItem('authToken'); // ÐÐ¾ÑÑÑÐ±ÐµÐ½ ÑÐ¾ÐºÐµÐ½ Ð´Ð»Ñ Ð°Ð²ÑÐ¾ÑÐ¸Ð·Ð°ÑÑÑ

         try {
             const response = await fetch(`${API_BASE_URL}/comments/${commentId}`, {
                 method: 'DELETE',
                 headers: {
                     'Authorization': `Bearer ${token}` // ÐÐ¾Ð´Ð°ÑÐ¼Ð¾ ÑÐ¾ÐºÐµÐ½, ÑÐºÑÐ¾ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾
                 }
             });

             if (response.status === 204) { // Ð£ÑÐ¿ÑÑÐ½Ðµ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ (No Content)
                 alert('ÐÐ¾Ð¼ÐµÐ½ÑÐ°Ñ ÑÑÐ¿ÑÑÐ½Ð¾ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð¾.');
                 // ÐÐ½Ð¾Ð²Ð»ÑÑÐ¼Ð¾ ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ² Ð´Ð»Ñ Ð¿Ð¾ÑÐ¾ÑÐ½Ð¾Ð³Ð¾ Ð¿ÑÐ¾Ð´ÑÐºÑÑ
                 if (currentProductId) {
                     await fetchComments(currentProductId);
                 }
             } else if (response.status === 404) {
                  throw new Error("ÐÐ¾Ð¼ÐµÐ½ÑÐ°Ñ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾ (404).");
             } else if (response.status === 403) {
                  throw new Error("Ð£ Ð²Ð°Ñ Ð½ÐµÐ¼Ð°Ñ Ð¿ÑÐ°Ð² Ð´Ð»Ñ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ ÑÑÐ¾Ð³Ð¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ (403).");
             }
             else {
                 const errorBody = await response.text();
                 throw new Error(`ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ: ${response.status}. ${errorBody}`);
             }
         } catch (error) {
             console.error('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð²Ð¸Ð´Ð°Ð»Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ:', error);
             alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð²Ð¸Ð´Ð°Ð»Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ: ' + error.message);
         }
     }
     
  // --- ÐÐ½Ð¾Ð²Ð»ÐµÐ½Ð° ÑÑÐ½ÐºÑÑÑ Ð½Ð°Ð»Ð°ÑÑÑÐ²Ð°Ð½Ð½Ñ Ð¾Ð±ÑÐ¾Ð±Ð½Ð¸ÐºÑÐ² Ð¿Ð¾Ð´ÑÐ¹ ---
  function setupCardButtonListeners() {
        const commentModalEl = document.getElementById('commentModal');
        const commentModal = commentModalEl ? new bootstrap.Modal(commentModalEl) : null;

        // View (Ð²ÑÐ´ÐºÑÐ¸Ð²Ð°Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ)
        document.querySelectorAll('.view-btn').forEach(button => {
            button.addEventListener('click', () => {
                currentProductId = button.getAttribute('data-product-id');
                if (!currentProductId) {
                    console.error("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð¾ÑÑÐ¸Ð¼Ð°ÑÐ¸ ID Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð· ÐºÐ½Ð¾Ð¿ÐºÐ¸ View.");
                    return;
                }
                console.log("ÐÑÐ´ÐºÑÐ¸ÑÐ¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð´Ð»Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ ID:", currentProductId);

                if (commentModal) {
                    const commentInput = document.getElementById('commentInput');
                    if(commentInput) commentInput.value = ''; // ÐÑÐ¸ÑÑÐ¸ÑÐ¸ Ð¿Ð¾Ð»Ðµ Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ

                    // ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ñ Ð²ÑÐ´Ð¾Ð±ÑÐ°Ð·Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð· Ð±ÐµÐºÐµÐ½Ð´Ñ
                    fetchComments(currentProductId);

                    commentModal.show();
                } else {
                    console.error("ÐÐ¾Ð´Ð°Ð»ÑÐ½Ðµ Ð²ÑÐºÐ½Ð¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ² Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾!");
                }
            });
        });

        // Edit (Ð±ÐµÐ· Ð·Ð¼ÑÐ½, Ð¿ÐµÑÐµÐºÐ¾Ð½Ð°Ð¹ÑÐµÑÑ, ÑÐ¾ openEditModal Ð¿ÑÐ°ÑÑÑ)
        document.querySelectorAll('.edit-btn').forEach(button => {
            button.addEventListener('click', async function () {
                const productId = this.getAttribute('data-product-id');
                await openEditModal(productId);
            });
        });

        // Delete (Ð±ÐµÐ· Ð·Ð¼ÑÐ½, Ð¿ÐµÑÐµÐºÐ¾Ð½Ð°Ð¹ÑÐµÑÑ, ÑÐ¾ deleteProduct Ð¿ÑÐ°ÑÑÑ)
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', async function () {
                const productId = this.getAttribute('data-product-id');
                if (confirm(`ÐÐ¸ Ð²Ð¿ÐµÐ²Ð½ÐµÐ½Ñ, ÑÐ¾ ÑÐ¾ÑÐµÑÐµ Ð²Ð¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑ Ð· ID ${productId}?`)) {
                    await deleteProduct(productId);
                }
            });
        });
    }


  // --- ÐÐ½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¾Ð±ÑÐ¾Ð±Ð½Ð¸Ðº ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð·Ð±ÐµÑÐµÐ¶ÐµÐ½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ ---
  const saveCommentBtn = document.getElementById('saveCommentBtn');
    if (saveCommentBtn) {
        saveCommentBtn.addEventListener('click', async () => { // Ð Ð¾Ð±Ð¸Ð¼Ð¾ ÑÑÐ½ÐºÑÑÑ Ð°ÑÐ¸Ð½ÑÑÐ¾Ð½Ð½Ð¾Ñ
            const commentInput = document.getElementById('commentInput');
            const commentText = commentInput.value.trim();
            //const authorId = getCurrentUserId(); // ÐÑÑÐ¸Ð¼ÑÑÐ¼Ð¾ ID Ð°Ð²ÑÐ¾ÑÐ° (Ð¿Ð¾ÑÑÑÐ±Ð½Ð° ÑÐµÐ°Ð»ÑÐ·Ð°ÑÑÑ)

            // if (!authorId) {
            //      alert("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð²Ð¸Ð·Ð½Ð°ÑÐ¸ÑÐ¸ Ð°Ð²ÑÐ¾ÑÐ° ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ. Ð£Ð²ÑÐ¹Ð´ÑÑÑ Ð² ÑÐ¸ÑÑÐµÐ¼Ñ.");
            //      console.error("Author ID is null or undefined.");
            //      return;
            // }

            if (commentText && currentProductId !== null) {
                 // ÐÐ¸ÐºÐ»Ð¸ÐºÐ°ÑÐ¼Ð¾ ÑÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð½Ð° Ð±ÐµÐºÐµÐ½Ð´
                const success = await addComment(currentProductId, commentText);

                if (success) {
                    // ÐÑÐ¸ÑÑÐ¸ÑÐ¸ Ð¿Ð¾Ð»Ðµ Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ ÑÑÐ»ÑÐºÐ¸ ÑÐºÑÐ¾ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ ÑÑÐ¿ÑÑÐ½Ð¾ Ð´Ð¾Ð´Ð°Ð½Ð¾
                    commentInput.value = '';
                    // Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑÐ² Ð²Ð¶Ðµ Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð²ÑÐµÑÐµÐ´Ð¸Ð½Ñ addComment->fetchComments
                }
                // ÐÐµ Ð·Ð°ÐºÑÐ¸Ð²Ð°ÑÐ¼Ð¾ Ð¼Ð¾Ð´Ð°Ð»ÐºÑ Ð°Ð²ÑÐ¾Ð¼Ð°ÑÐ¸ÑÐ½Ð¾

            } else if (!commentText) {
                 alert("ÐÑÐ´Ñ Ð»Ð°ÑÐºÐ°, Ð²Ð²ÐµÐ´ÑÑÑ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ.");
            } else {
                console.error("ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð±ÐµÑÐµÐ³ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ: ID Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð½Ðµ Ð²ÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾.");
                 alert("Ð¡ÑÐ°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ°. ÐÐµÐ¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð·Ð±ÐµÑÐµÐ³ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°Ñ.");
            }
        });
    }

  const addCardModalElement = document.getElementById('addCardModal');
  const addCardModal = addCardModalElement ? new bootstrap.Modal(addCardModalElement) : null;

  function openAddModal() {
      if (addCardModal) {
          document.getElementById('addCardForm').reset();
          addCardModal.show();
      } else {
           console.error("ÐÐ¾Ð´Ð°Ð»ÑÐ½Ðµ Ð²ÑÐºÐ½Ð¾ Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾.");
      }
  }

  // ÐÐ±ÑÐ¾Ð±Ð½Ð¸Ðº Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ ÑÐ¾ÑÐ¼Ð¸ ÐÐÐÐÐÐÐÐÐ¯
  const addCardForm = document.getElementById('addCardForm');
  if (addCardForm) {
       addCardForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          await addNewCard();
       });
  }

   // ÐÑÐ¸Ð½ÑÑÐ¾Ð½Ð½Ð° ÑÑÐ½ÐºÑÑÑ Ð´Ð»Ñ ÐÐÐÐÐÐÐÐÐ¯ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿ÑÐ¾Ð´ÑÐºÑÑ ÑÐµÑÐµÐ· API
  async function addNewCard() {
      const titleInput = document.getElementById('addCardOriginalTitle');
      const descriptionInput = document.getElementById('addCardDescription');
      const typeSelect = document.getElementById('addCardType');

      if (!titleInput || !descriptionInput || !typeSelect) {
          console.error("ÐÐ»ÐµÐ¼ÐµÐ½ÑÐ¸ ÑÐ¾ÑÐ¼Ð¸ Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ñ.");
          alert("ÐÐ¾Ð¼Ð¸Ð»ÐºÐ°: ÐÐµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾ Ð½ÐµÐ¾Ð±ÑÑÐ´Ð½Ñ ÐµÐ»ÐµÐ¼ÐµÐ½ÑÐ¸ ÑÐ¾ÑÐ¼Ð¸.");
          return;
      }

      const title = titleInput.value.trim();
      const description = descriptionInput.value.trim();
      const type = typeSelect.value;

      if (!title || !description || !type) {
          alert("ÐÑÐ´Ñ Ð»Ð°ÑÐºÐ°, Ð·Ð°Ð¿Ð¾Ð²Ð½ÑÑÑ Ð²ÑÑ Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ñ Ð¿Ð¾Ð»Ñ (ÐÐ°Ð·Ð²Ð°, ÐÐ¿Ð¸Ñ, Ð¢Ð¸Ð¿).");
          return;
      }

      const productType = type.toUpperCase();
      const productData = {
        originalTitle: title,
        description: description,
        type: productType,
        reviewCount: 0,
        averageRating: 0
      };

      const token = localStorage.getItem('authToken');
      if (!token) {
           alert("ÐÐ»Ñ Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾ ÑÐ²ÑÐ¹ÑÐ¸ Ð² ÑÐ¸ÑÑÐµÐ¼Ñ.");
           return;
      }

      try {
        const response = await fetch('http://localhost:8080/products', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${token}`
          },
          body: JSON.stringify(productData)
        });

        if (!response.ok) {
            const errorBody = await response.text();
            let errorMessage = `ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° ÑÑÐ²Ð¾ÑÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ: ${response.status}`;
            try {
                const errorJson = JSON.parse(errorBody);
                 if (errorJson.message) errorMessage += ` - ${errorJson.message}`;
                 else errorMessage += ` - ${errorBody}`;
            } catch (e) { errorMessage += ` - ${errorBody}`; }
            throw new Error(errorMessage);
        }

        alert('ÐÑÐ¾Ð´ÑÐºÑ ÑÑÐ¿ÑÑÐ½Ð¾ Ð´Ð¾Ð´Ð°Ð½Ð¾!');
        if (addCardModal) addCardModal.hide();
        const activeFilterLink = document.querySelector('#filter-nav .nav-link.active');
        const currentFilter = activeFilterLink ? activeFilterLink.getAttribute('data-filter') : 'all';
        await fetchAndRenderProducts(currentFilter); // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÑÐ¼Ð¾ await ÑÑÑ

      } catch (error) {
        console.error('ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿ÑÐ¸ Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ:', error);
        alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð´Ð¾Ð´Ð°ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑ: ' + error.message);
      }
  }

   // --- Ð¤ÑÐ½ÐºÑÑÑ Ð´Ð»Ñ Ð¼Ð¾Ð´Ð°Ð»ÑÐ½Ð¾Ð³Ð¾ Ð²ÑÐºÐ½Ð° Ð ÐÐÐÐÐ£ÐÐÐÐÐ¯ ---
  const editCardModalElement = document.getElementById('editCardModal');
  const editCardModal = editCardModalElement ? new bootstrap.Modal(editCardModalElement) : null;
  const editCardForm = document.getElementById('editCardForm');
  const editCardIdInput = document.getElementById('editCardId');
  const editCardOriginalTitleInput = document.getElementById('editCardOriginalTitle');
  const editCardDescriptionInput = document.getElementById('editCardDescription');
  const editCardTypeSelect = document.getElementById('editCardType');

  async function openEditModal(productId) {
       if (!editCardModal || !editCardIdInput || !editCardOriginalTitleInput || !editCardDescriptionInput || !editCardTypeSelect) {
           console.error("ÐÐ»ÐµÐ¼ÐµÐ½ÑÐ¸ Ð¼Ð¾Ð´Ð°Ð»ÑÐ½Ð¾Ð³Ð¾ Ð²ÑÐºÐ½Ð° ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ñ.");
           return;
       }
       const token = localStorage.getItem('authToken');
        if (!token) {
            alert("ÐÐ»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾ ÑÐ²ÑÐ¹ÑÐ¸ Ð² ÑÐ¸ÑÑÐµÐ¼Ñ.");
            return;
       }
       try {
           const response = await fetch(`http://localhost:8080/products/${productId}`, {
               method: 'GET',
               headers: {
                   'Accept': 'application/json',
                    'Authorization': `Bearer ${token}`
               }
           });
           if (!response.ok) {
                const errorBody = await response.text();
                throw new Error(`ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð´Ð°Ð½Ð¸Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ: ${response.status} ${errorBody}`);
           }
           const productData = await response.json();
           editCardIdInput.value = productData.id;
           editCardOriginalTitleInput.value = productData.originalTitle || '';
           editCardDescriptionInput.value = productData.description || '';
           if (productData.type) {
               editCardTypeSelect.value = productData.type.toUpperCase();
           } else {
               editCardTypeSelect.value = '';
           }
           editCardModal.show();
       } catch (error) {
           console.error('Ð¡ÑÐ°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ° Ð¿ÑÐ¸ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð´Ð°Ð½Ð¸Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð´Ð»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ:', error);
           alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ð´Ð°Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ: ' + error.message);
       }
  }

   // ÐÐ±ÑÐ¾Ð±Ð½Ð¸Ðº Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ð½Ð½Ñ ÑÐ¾ÑÐ¼Ð¸ Ð ÐÐÐÐÐ£ÐÐÐÐÐ¯
  if (editCardForm) {
       editCardForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          await saveEditedCard();
       });
  }

  async function saveEditedCard() {
       const productId = editCardIdInput.value;
       const title = editCardOriginalTitleInput.value.trim();
       const description = editCardDescriptionInput.value.trim();
       const type = editCardTypeSelect.value;

       if (!productId) {
            alert("ÐÐ¾Ð¼Ð¸Ð»ÐºÐ°: ÐÐµ Ð²Ð¸Ð·Ð½Ð°ÑÐµÐ½Ð¾, ÑÐºÐ¸Ð¹ Ð¿ÑÐ¾Ð´ÑÐºÑ Ð¾Ð½Ð¾Ð²Ð»ÑÐ²Ð°ÑÐ¸.");
            return;
       }
        if (!title || !description || !type) {
            alert("ÐÑÐ´Ñ Ð»Ð°ÑÐºÐ°, Ð·Ð°Ð¿Ð¾Ð²Ð½ÑÑÑ Ð²ÑÑ Ð¿Ð¾Ð»Ñ.");
            return;
        }
       const productType = type.toUpperCase();
       const productData = {
         originalTitle: title,
         description: description,
         type: productType
       };
        const token = localStorage.getItem('authToken');
        if (!token) {
            alert("ÐÐ»Ñ Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾ ÑÐ²ÑÐ¹ÑÐ¸ Ð² ÑÐ¸ÑÑÐµÐ¼Ñ.");
            return;
       }
       try {
           const response = await fetch(`http://localhost:8080/products/${productId}`, {
               method: 'PUT',
               headers: {
                   'Content-Type': 'application/json',
                   'Authorization': `Bearer ${token}`
               },
               body: JSON.stringify(productData)
           });
           if (!response.ok) {
                const errorBody = await response.text();
                let errorMessage = `ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ: ${response.status}`;
                try {
                     const errorJson = JSON.parse(errorBody);
                     if (errorJson.message) errorMessage += ` - ${errorJson.message}`;
                     else errorMessage += ` - ${errorBody}`;
                } catch (e) { errorMessage += ` - ${errorBody}`; }
                throw new Error(errorMessage);
           }
           alert('ÐÑÐ¾Ð´ÑÐºÑ ÑÑÐ¿ÑÑÐ½Ð¾ Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾!');
           if (editCardModal) editCardModal.hide();
           const activeFilterLink = document.querySelector('#filter-nav .nav-link.active');
           const currentFilter = activeFilterLink ? activeFilterLink.getAttribute('data-filter') : 'all';
           await fetchAndRenderProducts(currentFilter); // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÑÐ¼Ð¾ await ÑÑÑ

       } catch (error) {
           console.error('ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿ÑÐ¸ Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ:', error);
           alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð¾Ð½Ð¾Ð²Ð¸ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑ: ' + error.message);
       }
  }

  // ÐÑÐ¸Ð½ÑÑÐ¾Ð½Ð½Ð° ÑÑÐ½ÐºÑÑÑ Ð´Ð»Ñ ÐÐÐÐÐÐÐÐÐ¯ Ð¿ÑÐ¾Ð´ÑÐºÑÑ ÑÐµÑÐµÐ· API
  async function deleteProduct(productId) {
       const token = localStorage.getItem('authToken');
        if (!token) {
            alert("ÐÐ»Ñ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð¿Ð¾ÑÑÑÐ±Ð½Ð¾ ÑÐ²ÑÐ¹ÑÐ¸ Ð² ÑÐ¸ÑÑÐµÐ¼Ñ.");
            return;
       }
       try {
           const response = await fetch(`http://localhost:8080/products/${productId}`, {
               method: 'DELETE',
               headers: { 'Authorization': `Bearer ${token}` }
           });
           if (!response.ok) {
                 const errorBody = await response.text();
                let errorMessage = `ÐÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ: ${response.status}`;
                 try {
                     const errorJson = JSON.parse(errorBody);
                     if (errorJson.message) errorMessage += ` - ${errorJson.message}`;
                     else errorMessage += ` - ${errorBody}`;
                } catch (e) { errorMessage += ` - ${errorBody}`; }
               throw new Error(errorMessage);
           }
           alert('ÐÑÐ¾Ð´ÑÐºÑ ÑÑÐ¿ÑÑÐ½Ð¾ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð¾!');
           // ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ ÐºÐ¾Ð¼ÐµÐ½ÑÐ°ÑÑ Ð´Ð»Ñ ÑÑÐ¾Ð³Ð¾ Ð¿ÑÐ¾Ð´ÑÐºÑÑ Ð· localStorage
           localStorage.removeItem(`comments_${productId}`);

           const activeFilterLink = document.querySelector('#filter-nav .nav-link.active');
           const currentFilter = activeFilterLink ? activeFilterLink.getAttribute('data-filter') : 'all';
           await fetchAndRenderProducts(currentFilter); // ÐÐ¸ÐºÐ¾ÑÐ¸ÑÑÐ¾Ð²ÑÑÐ¼Ð¾ await ÑÑÑ

       } catch (error) {
            console.error('Ð¡ÑÐ°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ° Ð¿ÑÐ¸ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ Ð¿ÑÐ¾Ð´ÑÐºÑÑ:', error);
           alert('ÐÐµ Ð²Ð´Ð°Ð»Ð¾ÑÑ Ð²Ð¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¿ÑÐ¾Ð´ÑÐºÑ: ' + error.message);
       }
  }


  // --- ÐÐ½ÑÑÑÐ°Ð»ÑÐ·Ð°ÑÑÑ Ð¿ÑÐ¸ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ ÑÑÐ¾ÑÑÐ½ÐºÐ¸ ---
  document.addEventListener("DOMContentLoaded", function () {
      updateAuthUI();

      // ÐÐ±ÑÐ¾Ð±Ð½Ð¸ÐºÐ¸ ÑÑÐ»ÑÑÑÑÐ²
      const navLinks = document.querySelectorAll("#filter-nav .nav-link");
      navLinks.forEach(link => {
          link.addEventListener("click", function (e) {
              e.preventDefault();
              navLinks.forEach(l => l.classList.remove("active"));
              this.classList.add("active");
              const filter = this.getAttribute("data-filter");
              fetchAndRenderProducts(filter); // ÐÐ°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð· Ð±ÐµÐºÐµÐ½Ð´Ñ
          });
      });

      // ÐÐ¾ÑÐ°ÑÐºÐ¾Ð²Ðµ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶ÐµÐ½Ð½Ñ Ð²ÑÑÑ Ð¿ÑÐ¾Ð´ÑÐºÑÑÐ²
       setTimeout(() => {
           // Ð¡Ð¿Ð¾ÑÐ°ÑÐºÑ ÑÐ¿ÑÐ¾Ð±ÑÑÐ¼Ð¾ Ð·Ð°Ð²Ð°Ð½ÑÐ°Ð¶Ð¸ÑÐ¸ Ð· Ð±ÐµÐºÐµÐ½Ð´Ñ
          fetchAndRenderProducts('all');
       }, 50);
  });

</script>
  </body>
  </html>